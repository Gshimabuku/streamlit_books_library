/* Books Library - Main Styles */

/* ==================================== */
/* 新規登録ボタンのスタイル */
/* ==================================== */
.add-book-button .stButton > button {
    background: #28a745 !important;
    border: none !important;
    font-size: 18px !important;
    font-weight: bold !important;
    padding: 15px 0px !important;
    border-radius: 8px !important;
    color: white !important;
}

.add-book-button .stButton > button:hover {
    background: #218838 !important;
}

/* ==================================== */
/* 本のカードスタイル */
/* ==================================== */
.book-card {
    border: 1px solid #ddd;
    border-radius: 8px;
    padding: 10px;
    margin-bottom: 10px;
    background-color: white;
}

/* 本のタイトル左寄せ・一行表示 */
.book-card h3 {
    text-align: left !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    max-width: 100% !important;
    line-height: 1.2 !important;
    font-size: clamp(16px, 4vw, 24px) !important;
    margin: 8px 0 8px 10px !important;
    font-weight: bold !important;
    padding: 0 !important;
}

/* 本のカード内画像 */
.book-card img {
    width: 100% !important;
    aspect-ratio: 3/4 !important;
    object-fit: contain !important;
    border-radius: 8px !important;
}

/* 巻数情報 */
.book-volume-info {
    font-size: clamp(11px, 3vw, 16px) !important;
    text-align: center !important;
    margin: 8px 0 8px 0 !important;
}

/* 完結・連載中ステータス */
.status-container {
    text-align: left !important;
    margin: 8px 0 8px 10px !important;
}

.status-badge {
    color: white !important;
    padding: 3px 8px !important;
    border-radius: 10px !important;
    font-size: clamp(10px, 2.5vw, 12px) !important;
    font-weight: bold !important;
}

.status-completed {
    background-color: #E53935 !important;
}

.status-ongoing {
    background-color: #2196F3 !important;
}

/* 未購入巻表示 */
.unpurchased-badge {
    background-color: #FF9800 !important;
    color: white !important;
    padding: 3px 8px !important;
    border-radius: 10px !important;
    font-size: clamp(9px, 2vw, 11px) !important;
    font-weight: bold !important;
    margin-left: 5px !important;
}

/* 詳細ページのステータスバッジ */
.detail-status-badge {
    display: inline-block !important;
    padding: 8px 16px !important;
    border-radius: 20px !important;
    font-weight: bold !important;
    font-size: 14px !important;
    margin: 5px 0 15px 0 !important;
    color: white !important;
}

/* ==================================== */
/* アコーディオンボタンのスタイル調整 */
/* ==================================== */
.stButton > button {
    width: 100%;
    margin-bottom: 10px;
}

/* ==================================== */
/* 雑誌名ヘッダー */
/* ==================================== */
.magazine-name-header {
    background-color: #f8f9fa;
    border-left: 4px solid #007bff;
    padding: 10px 15px;
    margin: 15px 0 10px 0;
    font-size: 16px;
    font-weight: bold;
    color: #495057;
}

/* ==================================== */
/* アコーディオンヘッダー（ロゴ + 折りたたみボタン） */
/* ==================================== */
.magazine-header {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
    padding: 6px 8px !important;
    margin: 12px 0 !important;
}

.magazine-header .magazine-logo {
    width: 48px !important;
    height: 48px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    background: #ffffff !important; /* 余白を白にする */
    border-radius: 6px !important;
    box-shadow: 0 1px 2px rgba(0,0,0,0.04) !important;
    padding: 4px !important;
}

.magazine-header .magazine-logo img {
    max-width: 100% !important;
    max-height: 100% !important;
    object-fit: contain !important; /* 画像を切り抜かず収める */
}

.magazine-header .magazine-toggle {
    flex: 1 1 auto !important;
    display: flex !important;
    align-items: center !important;
}

.magazine-header .magazine-toggle .stButton {
    width: 100% !important;
}

.magazine-header .magazine-toggle .stButton > button {
    height: 48px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: flex-start !important;
    gap: 8px !important;
    padding-left: 12px !important;
}

@media (max-width: 600px) {
    .magazine-header {
        gap: 8px !important;
        padding: 4px 6px !important;
    }
    .magazine-header .magazine-logo {
        width: 40px !important;
        height: 40px !important;
        padding: 3px !important;
    }
    .magazine-header .magazine-toggle .stButton > button {
        height: 40px !important;
        padding-left: 8px !important;
        font-size: 14px !important;
    }
}

/* ==================================== */
/* モバイル対応レスポンシブデザイン */
/* ==================================== */
@media (max-width: 768px) {
    .book-card {
        display: flex !important;
        flex-direction: row !important;
        align-items: flex-start !important;
        gap: 10px !important;
    }
    
    .mobile-book-image {
        flex: 0 0 40% !important;
        width: 40% !important;
    }
    
    .mobile-book-info {
        flex: 1 !important;
        display: flex !important;
        flex-direction: column !important;
        justify-content: space-between !important;
        min-height: 100% !important;
        min-width: 0 !important;
    }
    
    /* モバイルでタイトルを省略 */
    .mobile-book-info h3,
    .book-card h3 {
        white-space: nowrap !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
        max-width: 100% !important;
    }
    
    .detail-button-container {
        margin-top: auto !important;
    }

    .magazine-name-header {
        font-size: 14px;
        padding: 8px 12px;
    }
    
    /* モバイルでのボタン横並び強制 */
    [data-testid="column"] {
        flex-direction: row !important;
    }
    
    [data-testid="column"] > div {
        display: flex !important;
        gap: 5px !important;
    }
    
    .stButton {
        flex: 1 !important;
        min-width: 0 !important;
    }
    
    .stButton > button {
        width: 100% !important;
        white-space: nowrap !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
        font-size: 12px !important;
        padding: 8px 4px !important;
    }
}

/* ==================================== */
/* タブレット横向き・3カラムレイアウト対応 */
/* ==================================== */
@media (min-width: 769px) and (max-width: 1024px) {
    .book-card {
        display: block !important;
    }
    
    /* タイトルの省略を強化 */
    .book-card h3 {
        white-space: nowrap !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
        max-width: 100% !important;
        font-size: clamp(14px, 3vw, 18px) !important;
    }
    
    /* 画像のアスペクト比を維持 */
    .book-card img {
        width: 100% !important;
        aspect-ratio: 3/4 !important;
        object-fit: contain !important;
    }
    
    /* ボタンサイズを調整 */
    .stButton > button {
        font-size: 11px !important;
        padding: 6px 8px !important;
    }
}

@media (min-width: 769px) {
    .book-card {
        display: block !important;
    }
    
    .mobile-book-image, 
    .mobile-book-info {
        width: 100% !important;
        flex: none !important;
    }
    
    .detail-button-container {
        margin-top: 8px !important;
    }
}

/* ==================================== */
/* 詳細画面のボタン配置 */
/* ==================================== */
.detail-buttons-container {
    margin-bottom: 20px;
}

/* PC版：右揃えのボタン配置 */
@media (min-width: 769px) {
    .detail-buttons-container [data-testid="column"]:last-child {
        display: flex !important;
        justify-content: flex-end !important;
        gap: 8px !important;
    }
    
    .detail-buttons-container [data-testid="column"]:last-child [data-testid="column"] {
        flex: 0 0 auto !important;
        margin: 0 !important;
        padding: 0 2px !important;
    }
    
    .detail-buttons-container [data-testid="column"]:last-child .stButton {
        margin: 0 !important;
    }
}

/* モバイル版：強制横並び */
@media (max-width: 768px) {
    .detail-buttons-container {
        display: flex !important;
        flex-wrap: nowrap !important;
        gap: 4px !important;
        width: 100% !important;
    }
    
    .detail-buttons-container [data-testid="column"] {
        flex: 1 !important;
        min-width: 0 !important;
        margin: 0 !important;
        padding: 0 1px !important;
    }
    
    .detail-buttons-container [data-testid="column"]:nth-child(2) {
        flex: 0 0 8px !important;
    }
    
    .detail-buttons-container [data-testid="column"]:last-child {
        display: flex !important;
        flex-direction: row !important;
        gap: 2px !important;
    }
    
    .detail-buttons-container [data-testid="column"]:last-child [data-testid="column"] {
        flex: 1 !important;
        margin: 0 !important;
        padding: 0 1px !important;
    }
    
    .detail-buttons-container .stButton {
        margin: 0 !important;
        width: 100% !important;
    }
    
    .detail-buttons-container .stButton > button {
        width: 100% !important;
        font-size: 10px !important;
        padding: 6px 2px !important;
        white-space: nowrap !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
        min-height: 38px !important;
    }
}